@page "/Admin/Staff"
@rendermode InteractiveServer

<div class="container-fluid mt-4">
    <h2 class="mb-4">Hospital Management System - Demo</h2>

    <!-- Staff Section -->
    <div class="card">
        <div class="card-header text-white d-flex justify-content-between align-items-center" style="background-color: #5f4f96;">
            <h5 class="mb-0">
                <i class="bi bi-person-badge-fill me-2"></i>
                Total Staff: <span class="badge bg-light" style="color: #5f4f96;">@staff.Count</span>
            </h5>
            <button class="btn btn-light btn-sm fw-bold" style="color: #5f4f96;"  @onclick='() => Navigation.NavigateTo("/admin/staff/create")'>
                <i class="bi bi-plus-circle me-1"></i> Add Staff
            </button>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="table-light">
                        <tr>
                            <th>Staff ID</th>
                            <th>Full Name</th>
                            <th>Role</th>
                            <th>Specialization</th>
                            <th>Phone</th>
                            <th>Email</th>
                            <th>License Number</th>
                            <th>Hourly Rate</th>
                            <th>Hired Date</th>
                            <th style="width: 150px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var member in staff)
                        {
                            <tr>
                                <td><span class="badge bg-secondary">@member.StaffId</span></td>
                                <td><strong>@member.FullName</strong></td>
                                <td>
                                    <span class="badge @GetRoleBadgeClass(member.Role)">
                                        @member.Role
                                    </span>
                                </td>
                                <td>@member.Specialization</td>
                                <td>@member.Phone</td>
                                <td>@member.Email</td>
                                <td>@member.LicenseNumber</td>
                                <td>$@member.HourlyRate.ToString("N2")/hr</td>
                                <td>@member.HiredDate.ToString("yyyy-MM-dd")</td>
                                <td>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <button class="btn btn-outline-primary"
                                                @onclick="() => ViewStaff(member.StaffId)"
                                                title="View Details">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="btn btn-outline-warning"
                                                @onclick="() => EditStaff(member.StaffId)"
                                                title="Edit">
                                            <i class="bi bi-pencil"></i>
                                        </button>
                                        <button class="btn btn-outline-danger"
                                                @onclick="() => DeleteStaff(member.StaffId)"
                                                title="Delete">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@code {
    // Staff Demo Model
    public class StaffDemo
    {
        public int StaffId { get; set; }
        public string FullName { get; set; } = string.Empty;
        public string Role { get; set; } = string.Empty;
        public string Specialization { get; set; } = string.Empty;
        public string Phone { get; set; } = string.Empty;
        public string Email { get; set; } = string.Empty;
        public string LicenseNumber { get; set; } = string.Empty;
        public decimal HourlyRate { get; set; }
        public DateTime HiredDate { get; set; }
    }

    private List<StaffDemo> staff = new();

    protected override void OnInitialized()
    {
        // Initialize hardcoded staff data
        staff = new List<StaffDemo>
        {
            new StaffDemo
            {
                StaffId = 2001,
                FullName = "Dr. Sarah Williams",
                Role = "Doctor",
                Specialization = "Cardiology",
                Phone = "+46 70 111 2222",
                Email = "sarah.williams@hospital.com",
                LicenseNumber = "MD-2015-1234",
                HourlyRate = 150.00m,
                HiredDate = new DateTime(2015, 6, 1)
            },
            new StaffDemo
            {
                StaffId = 2002,
                FullName = "Dr. James Peterson",
                Role = "Doctor",
                Specialization = "Neurology",
                Phone = "+46 70 222 3333",
                Email = "james.peterson@hospital.com",
                LicenseNumber = "MD-2018-5678",
                HourlyRate = 145.00m,
                HiredDate = new DateTime(2018, 3, 15)
            },
            new StaffDemo
            {
                StaffId = 2003,
                FullName = "Nurse Maria Karlsson",
                Role = "Nurse",
                Specialization = "Emergency Care",
                Phone = "+46 70 333 4444",
                Email = "maria.karlsson@hospital.com",
                LicenseNumber = "RN-2019-9012",
                HourlyRate = 45.00m,
                HiredDate = new DateTime(2019, 9, 10)
            },
            new StaffDemo
            {
                StaffId = 2004,
                FullName = "Dr. Henrik Olsson",
                Role = "Doctor",
                Specialization = "Orthopedics",
                Phone = "+46 70 444 5555",
                Email = "henrik.olsson@hospital.com",
                LicenseNumber = "MD-2012-3456",
                HourlyRate = 155.00m,
                HiredDate = new DateTime(2012, 1, 20)
            },
            new StaffDemo
            {
                StaffId = 2005,
                FullName = "Nurse Emma Nilsson",
                Role = "Nurse",
                Specialization = "Pediatrics",
                Phone = "+46 70 555 6666",
                Email = "emma.nilsson@hospital.com",
                LicenseNumber = "RN-2020-7890",
                HourlyRate = 42.00m,
                HiredDate = new DateTime(2020, 7, 5)
            },
            new StaffDemo
            {
                StaffId = 2006,
                FullName = "Dr. Linda Gustafsson",
                Role = "Doctor",
                Specialization = "General Practice",
                Phone = "+46 70 666 7777",
                Email = "linda.gustafsson@hospital.com",
                LicenseNumber = "MD-2016-2345",
                HourlyRate = 120.00m,
                HiredDate = new DateTime(2016, 11, 12)
            },
            new StaffDemo
            {
                StaffId = 2007,
                FullName = "Admin Peter Andersson",
                Role = "Receptionist",
                Specialization = "Front Desk",
                Phone = "+46 70 777 8888",
                Email = "peter.andersson@hospital.com",
                LicenseNumber = "N/A",
                HourlyRate = 35.00m,
                HiredDate = new DateTime(2021, 4, 18)
            },
            new StaffDemo
            {
                StaffId = 2008,
                FullName = "Nurse Johan Berg",
                Role = "Nurse",
                Specialization = "ICU",
                Phone = "+46 70 888 9999",
                Email = "johan.berg@hospital.com",
                LicenseNumber = "RN-2017-4567",
                HourlyRate = 50.00m,
                HiredDate = new DateTime(2017, 8, 25)
            }
        };
    }

    // Staff Action Methods
    private void ViewStaff(int staffId)
    {
        Navigation.NavigateTo($"/admin/staff/view/{staffId}");
    }

    private void EditStaff(int staffId)
    {
        Navigation.NavigateTo($"/admin/staff/edit/{staffId}");
    }

    private void DeleteStaff(int staffId)
    {
        // In real app, show confirmation dialog
        // For demo, just remove from list
        var member = staff.FirstOrDefault(s => s.StaffId == staffId);
        if (member != null)
        {
            staff.Remove(member);
            StateHasChanged();
        }
    }

    private string GetRoleBadgeClass(string role)
    {
        return role switch
        {
            "Doctor" => "bg-primary",
            "Nurse" => "bg-success",
            "Receptionist" => "bg-warning text-dark",
            _ => "bg-secondary"
        };
    }
}